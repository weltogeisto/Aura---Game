import type { Scenario } from '@/types';

const sumTargetValues = (targets: Scenario['targets']): number =>
  targets.reduce((total, target) => total + target.value, 0);

const createScenario = (scenario: Omit<Scenario, 'totalMaxValue'>): Scenario => ({
  ...scenario,
  totalMaxValue: sumTargetValues(scenario.targets),
});

export const SCENARIOS: Record<string, Scenario> = {
  louvre: createScenario({
    id: 'louvre',
    name: 'The Louvre - Salle des États',
    description: 'Paris, France. One shot to maximize cultural damage in the most visited museum.',
    isMvp: true,
    panoramaColor: '#d4a574',
    targets: [
      {
        id: 'mona-lisa',
        name: 'Mona Lisa',
        value: 800000000,
        position: [0.12, 0.18, 0.42],
        radius: 0.15,
        type: 'masterpiece',
        material: 'oil-on-wood',
        description: 'Leonardo da Vinci\'s most famous painting, behind bulletproof glass.',
      },
      {
        id: 'wedding-at-cana',
        name: 'Wedding at Cana',
        value: 300000000,
        position: [-0.35, 0.05, 0.45],
        radius: 0.25,
        type: 'masterpiece',
        material: 'oil-on-canvas',
        description: 'Veronese\'s massive canvas of biblical abundance.',
      },
      {
        id: 'venus-de-milo',
        name: 'Venus de Milo',
        value: 150000000,
        position: [0.3, -0.1, -0.1],
        radius: 0.12,
        type: 'sculpture',
        material: 'marble',
        description: 'Ancient Greek statue of the goddess of love.',
      },
      {
        id: 'winged-victory',
        name: 'Winged Victory',
        value: 140000000,
        position: [0.25, 0.15, -0.2],
        radius: 0.15,
        type: 'sculpture',
        material: 'marble',
        description: 'Nike of Samothrace, symbol of triumph.',
      },
      {
        id: 'fire-sensor',
        name: 'Fire Suppression Sensor',
        value: 200,
        position: [0, 0.5, 0],
        radius: 0.05,
        type: 'easter-egg-systemic',
        description: 'Hitting this triggers the sprinkler system, destroying all paintings.',
        specialEffects: [
          'Fire suppression system activated!',
          'All paintings destroyed by water damage.',
          'Total cultural damage: €3.5 Billion',
        ],
        overrideTotalDamage: 1390000215,
        breakdownMode: 'masterpieces-and-sculptures',
      },
      {
        id: 'mop-bucket',
        name: 'Mop Bucket (Duchamp\'s Ready-made)',
        value: 15,
        position: [0.4, -0.3, 0.3],
        radius: 0.08,
        type: 'easter-egg-dadaist',
        description: 'An ordinary mop bucket. But is it art? Is value arbitrary?',
        specialEffects: [
          'DUCHAMP MODE ACTIVATED',
          'All values have been philosophically inverted.',
        ],
        overrideTotalDamage: 0,
        breakdownMode: 'none',
      },
    ],
    criticLines: {
      low: [
        'A whisper of damage. The Louvre barely notices the breeze.',
        'A timid graze. History yawns and turns the page.',
      ],
      mid: [
        'Respectable damage—enough to make the curators flinch.',
        'A clean strike. The gallery will remember this silence.',
      ],
      high: [
        'Catastrophic. The canon reels beneath the blow.',
        'Devastation worthy of a manifesto. The walls will never forget.',
      ],
    },
  }),
  'st-peters': createScenario({
    id: 'st-peters',
    name: "St. Peter's Basilica - Nave",
    description: 'Vatican City. Sacred architecture where atmosphere outvalues material.',
    panoramaColor: '#cbb89a',
    targets: [
      {
        id: 'pieta',
        name: 'The Pietà',
        value: 1000000000,
        position: [0.1, 0.12, 0.48],
        radius: 0.14,
        type: 'sculpture',
        material: 'marble',
        description: 'Michelangelo\'s sculpture behind protective glass.',
      },
      {
        id: 'baldachin',
        name: 'Bernini Baldachin',
        value: 500000000,
        position: [-0.2, 0.18, 0.4],
        radius: 0.22,
        type: 'sculpture',
        material: 'bronze',
        description: 'Monumental bronze canopy over the papal altar.',
      },
      {
        id: 'st-peters-chair',
        name: "St. Peter's Chair",
        value: 200000000,
        position: [0.25, 0.05, 0.2],
        radius: 0.16,
        type: 'sculpture',
        material: 'gilded-bronze',
        description: 'The Cathedra Petri, gilded and elevated.',
      },
      {
        id: 'mosaic-floor',
        name: 'Cosmati Mosaic Floor',
        value: 2000000,
        position: [-0.05, -0.2, 0.35],
        radius: 0.18,
        type: 'other',
        material: 'stone',
        description: 'Intricate marble inlay with centuries of foot traffic.',
      },
      {
        id: 'marble-column',
        name: 'Marble Column',
        value: 10000000,
        position: [-0.35, 0.08, 0.25],
        radius: 0.2,
        type: 'other',
        material: 'marble',
        description: 'Massive structural column with minimal damage payoff.',
      },
      {
        id: 'pipe-organ-bellows',
        name: 'Pipe Organ Bellows',
        value: 5000,
        position: [0.35, 0.28, -0.15],
        radius: 0.08,
        type: 'easter-egg-systemic',
        description: 'Hidden bellows trigger a shockwave through stained glass.',
        specialEffects: [
          'Organ shockwave unleashed.',
          'Stained glass fractures across the nave.',
          'Sacred atmosphere collapses into rubble.',
        ],
        overrideTotalDamage: 1000000000,
        breakdownMode: 'all-targets',
      },
      {
        id: 'dan-brown-novel',
        name: 'Dan Brown Novel',
        value: 12,
        position: [0.12, -0.25, 0.15],
        radius: 0.05,
        type: 'easter-egg-dadaist',
        description: 'A paperback conspiracy that manufactures value from myth.',
        specialEffects: [
          'Myth machine engaged.',
          'Conspiracy fiction inflates devotional value.',
        ],
        overrideTotalDamage: 500000000,
        breakdownMode: 'none',
      },
    ],
  }),
  topkapi: createScenario({
    id: 'topkapi',
    name: 'Topkapi Palace - Imperial Treasury',
    description: 'Istanbul, Turkey. Ottoman opulence where display wars with authenticity.',
    panoramaColor: '#3b2a1f',
    targets: [
      {
        id: 'spoonmakers-diamond',
        name: "Spoonmaker's Diamond",
        value: 200000000,
        position: [0.05, 0.12, 0.45],
        radius: 0.08,
        type: 'masterpiece',
        material: 'diamond',
        description: '86-carat jewel behind curved glass.',
      },
      {
        id: 'topkapi-dagger',
        name: 'Topkapi Dagger',
        value: 150000000,
        position: [-0.2, 0.1, 0.42],
        radius: 0.12,
        type: 'masterpiece',
        material: 'gold-and-emerald',
        description: 'Emerald-encrusted ceremonial weapon.',
      },
      {
        id: 'jeweled-throne',
        name: 'Jeweled Throne',
        value: 100000000,
        position: [0.25, -0.02, 0.3],
        radius: 0.2,
        type: 'sculpture',
        material: 'gold',
        description: 'A throne heavy with gems and conquest.',
      },
      {
        id: 'iznik-tiles',
        name: 'Iznik Tile Wall',
        value: 50000,
        position: [-0.35, 0.05, 0.2],
        radius: 0.22,
        type: 'other',
        material: 'ceramic',
        description: 'Ceramic tiles that shatter satisfyingly.',
      },
      {
        id: 'ottoman-calligraphy',
        name: 'Ottoman Calligraphy Panel',
        value: 10000000,
        position: [0.32, 0.18, 0.15],
        radius: 0.16,
        type: 'masterpiece',
        material: 'paper',
        description: 'Gold-leaf script framed under glass.',
      },
      {
        id: 'topkapi-film-poster',
        name: 'Topkapi Film Poster',
        value: 5,
        position: [-0.12, -0.28, 0.1],
        radius: 0.05,
        type: 'easter-egg-dadaist',
        description: 'A heist movie poster tucked behind a display.',
        specialEffects: [
          'Cinematic heist energy detected.',
          'Legend eclipses the artifact.',
        ],
        overrideTotalDamage: 0,
        breakdownMode: 'none',
      },
      {
        id: 'gift-shop-replica',
        name: 'Gift Shop Replica',
        value: 25,
        position: [0.4, -0.2, 0.18],
        radius: 0.05,
        type: 'easter-egg-systemic',
        description: 'The replica that reveals the real diamond.',
        specialEffects: [
          'Replica shattered.',
          'Authenticity crisis spreads across the treasury.',
          'Collectors panic at once.',
        ],
        overrideTotalDamage: 500000000,
        breakdownMode: 'all-targets',
      },
    ],
  }),
  'forbidden-city': createScenario({
    id: 'forbidden-city',
    name: 'Forbidden City - Hall of Supreme Harmony',
    description: 'Beijing, China. Imperial power and cultural contamination collide.',
    panoramaColor: '#a11c1c',
    targets: [
      {
        id: 'dragon-throne',
        name: 'Dragon Throne',
        value: 400000000,
        position: [0, 0.12, 0.48],
        radius: 0.18,
        type: 'sculpture',
        material: 'gilded-wood',
        description: 'Gilded throne of dynastic authority.',
      },
      {
        id: 'jade-ruyi',
        name: 'Jade Ruyi Scepter',
        value: 50000000,
        position: [-0.2, 0.08, 0.3],
        radius: 0.08,
        type: 'sculpture',
        material: 'jade',
        description: 'Ceremonial scepter resting on the dais.',
      },
      {
        id: 'cloisonne-censer',
        name: 'Cloisonné Censer',
        value: 30000000,
        position: [0.22, 0.02, 0.32],
        radius: 0.1,
        type: 'sculpture',
        material: 'bronze-enamel',
        description: 'Bronze-enamel incense burner with dragon handles.',
      },
      {
        id: 'coffered-ceiling',
        name: 'Coffered Ceiling',
        value: 100000000,
        position: [0, 0.42, -0.05],
        radius: 0.28,
        type: 'other',
        material: 'gold-leaf',
        description: 'Gold-lacquered ceiling paneling above the throne.',
      },
      {
        id: 'lacquer-screen',
        name: 'Lacquer Screen',
        value: 20000000,
        position: [-0.32, -0.05, 0.25],
        radius: 0.16,
        type: 'other',
        material: 'lacquer',
        description: 'Fragile screens flanking the platform.',
      },
      {
        id: 'heirloom-seal',
        name: 'Heirloom Seal of the Realm',
        value: 20000000,
        position: [0.18, -0.15, 0.12],
        radius: 0.07,
        type: 'easter-egg-systemic',
        description: 'A jade seal that revokes dynastic legitimacy.',
        specialEffects: [
          'Mandate of Heaven revoked.',
          'Imperial legitimacy collapses instantly.',
        ],
        overrideTotalDamage: 1000000000000,
        breakdownMode: 'all-targets',
      },
      {
        id: 'coca-cola-bottle',
        name: 'Coca-Cola Bottle',
        value: 2,
        position: [-0.12, -0.28, 0.1],
        radius: 0.05,
        type: 'easter-egg-dadaist',
        description: 'A Western brand on a guard\'s desk.',
        specialEffects: [
          'Global brand erases imperial aura.',
          'Antique value collapses into pop kitsch.',
        ],
        overrideTotalDamage: 0,
        breakdownMode: 'none',
      },
    ],
  }),
  tsmc: createScenario({
    id: 'tsmc',
    name: 'TSMC Clean Room - Fab 18',
    description: 'Tainan, Taiwan. Technological value balanced on a dust particle.',
    panoramaColor: '#d6d2a9',
    targets: [
      {
        id: 'euv-machine',
        name: 'ASML EUV Machine',
        value: 150000000,
        position: [0.05, 0.12, 0.4],
        radius: 0.22,
        type: 'other',
        material: 'steel',
        description: 'Lithography machine with the flattest mirrors on Earth.',
      },
      {
        id: 'zeiss-lens',
        name: 'Zeiss Lens Assembly',
        value: 50000000,
        position: [-0.18, 0.08, 0.35],
        radius: 0.1,
        type: 'masterpiece',
        material: 'optical-glass',
        description: 'Precision optics nested inside the machine housing.',
      },
      {
        id: 'wafer-carrier',
        name: 'Loaded Wafer Carrier',
        value: 10000000,
        position: [0.25, -0.05, 0.3],
        radius: 0.12,
        type: 'other',
        material: 'silicon',
        description: 'A pod containing thousands of processors.',
      },
      {
        id: 'cleanroom-glass',
        name: 'Clean Room Glass Partition',
        value: 100000,
        position: [-0.3, 0.02, 0.2],
        radius: 0.2,
        type: 'other',
        material: 'glass',
        description: 'Refraction puzzle between rooms.',
      },
      {
        id: 'oht-robot-arm',
        name: 'OHT Robot Arm',
        value: 5000000,
        position: [0.3, 0.22, 0.1],
        radius: 0.1,
        type: 'other',
        material: 'composite',
        description: 'Moving overhead transport arm.',
      },
      {
        id: 'dust-filter',
        name: 'Dust Filter Intake',
        value: 500,
        position: [-0.35, 0.3, -0.05],
        radius: 0.06,
        type: 'easter-egg-systemic',
        description: 'A tiny filter that can contaminate an entire fab.',
        specialEffects: [
          'Particle storm unleashed.',
          'Yield crash ripples through the fab.',
          'Global supply chain freezes.',
        ],
        overrideTotalDamage: 10000000000,
        breakdownMode: 'all-targets',
      },
      {
        id: 'wooden-chair',
        name: 'Wooden Chair',
        value: 45,
        position: [0.12, -0.3, 0.15],
        radius: 0.08,
        type: 'easter-egg-dadaist',
        description: 'An illegal seat in the temple of productivity.',
        specialEffects: [
          'Forbidden rest embraced.',
          'Productivity myth dissolves.',
        ],
        overrideTotalDamage: 0,
        breakdownMode: 'none',
      },
    ],
  }),
  hermitage: createScenario({
    id: 'hermitage',
    name: 'The Hermitage - Peacock Clock Room',
    description: 'St. Petersburg, Russia. Mechanical complexity and political economy.',
    panoramaColor: '#b1c6d6',
    targets: [
      {
        id: 'peacock-clock',
        name: 'Peacock Clock',
        value: 30000000,
        position: [0.05, 0.08, 0.42],
        radius: 0.16,
        type: 'masterpiece',
        material: 'gilded-brass',
        description: '18th-century automaton with delicate gears.',
      },
      {
        id: 'crystal-chandelier',
        name: 'Crystal Chandelier',
        value: 5000000,
        position: [-0.12, 0.32, 0.2],
        radius: 0.12,
        type: 'sculpture',
        material: 'crystal',
        description: 'Shatter-prone chandelier glittering above.',
      },
      {
        id: 'mosaic-table',
        name: 'Florentine Mosaic Table',
        value: 15000000,
        position: [0.28, -0.05, 0.3],
        radius: 0.14,
        type: 'other',
        material: 'stone-inlay',
        description: 'Stone inlay table with high craftsmanship value.',
      },
      {
        id: 'gilded-column',
        name: 'Gilded Column',
        value: 2000000,
        position: [-0.3, 0.05, 0.25],
        radius: 0.2,
        type: 'other',
        material: 'gold-leaf',
        description: 'Decorative column with minimal structural consequence.',
      },
      {
        id: 'parquet-floor',
        name: 'Parquet Floor',
        value: 500000,
        position: [0, -0.25, 0.35],
        radius: 0.2,
        type: 'other',
        material: 'wood',
        description: 'Highly polished parquet flooring.',
      },
      {
        id: 'putin-portrait',
        name: 'Putin Portrait',
        value: 100,
        position: [-0.18, -0.28, 0.12],
        radius: 0.06,
        type: 'easter-egg-dadaist',
        description: 'A tiny portrait that revalues everything into oligarch prices.',
        specialEffects: [
          'Oligarch revaluation triggered.',
          'Every artifact suddenly appreciates.',
        ],
        overrideTotalDamage: 50000000,
        breakdownMode: 'none',
      },
      {
        id: 'chandelier-chain',
        name: 'Chandelier Chain',
        value: 50,
        position: [0.15, 0.38, 0.05],
        radius: 0.05,
        type: 'easter-egg-systemic',
        description: 'A fragile chain that drops the chandelier.',
        specialEffects: [
          'Chain snapped.',
          'The chandelier crashes through the room.',
        ],
        overrideTotalDamage: 50000000,
        breakdownMode: 'all-targets',
      },
    ],
  }),
  'federal-reserve': createScenario({
    id: 'federal-reserve',
    name: 'Federal Reserve - Gold Vault',
    description: 'New York, USA. Fiat abstraction where value is pure hallucination.',
    panoramaColor: '#9f8b58',
    targets: [
      {
        id: 'gold-bar',
        name: 'Gold Bar',
        value: 750000,
        position: [0.08, -0.05, 0.45],
        radius: 0.12,
        type: 'other',
        material: 'gold',
        description: 'Soft metal that absorbs bullets without satisfying damage.',
      },
      {
        id: 'tagged-gold-bar',
        name: 'Tagged Gold Bar',
        value: 0,
        position: [-0.12, -0.02, 0.42],
        radius: 0.12,
        type: 'easter-egg-dadaist',
        material: 'tungsten',
        description: 'A QC-tagged bar that reveals a tungsten core.',
        specialEffects: [
          'Counterfeit core exposed.',
          'Faith in reserves evaporates.',
        ],
        overrideTotalDamage: 0,
        breakdownMode: 'none',
      },
      {
        id: 'security-camera',
        name: 'Security Camera',
        value: 5000,
        position: [0.28, 0.28, 0.2],
        radius: 0.07,
        type: 'other',
        material: 'plastic',
        description: 'A single camera guarding the ledger.',
      },
      {
        id: 'computer-terminal',
        name: 'Computer Terminal',
        value: 10000,
        position: [0.32, -0.1, 0.25],
        radius: 0.1,
        type: 'other',
        material: 'electronics',
        description: 'Beige terminal for ledger access.',
      },
      {
        id: 'ethernet-cable',
        name: 'Ethernet Cable',
        value: 15,
        position: [0.3, -0.18, 0.12],
        radius: 0.05,
        type: 'easter-egg-systemic',
        description: 'Severing this collapses the digital ledger.',
        specialEffects: [
          'Ledger severed.',
          'Digital trust network collapses.',
        ],
        overrideTotalDamage: 1000000000000,
        breakdownMode: 'all-targets',
      },
      {
        id: 'concrete-floor',
        name: 'Concrete Floor',
        value: 0,
        position: [-0.3, -0.3, 0.1],
        radius: 0.18,
        type: 'other',
        material: 'concrete',
        description: 'Cold concrete with zero symbolic value.',
      },
    ],
  }),
  moma: createScenario({
    id: 'moma',
    name: 'MoMA - Contemporary Gallery',
    description: 'New York, USA. Modern art where destruction becomes creation.',
    panoramaColor: '#f5f5f5',
    targets: [
      {
        id: 'abstract-painting',
        name: 'Abstract Painting',
        value: 50000000,
        position: [0.1, 0.12, 0.4],
        radius: 0.18,
        type: 'masterpiece',
        material: 'oil-on-canvas',
        description: 'High-value abstraction with speculative pricing.',
      },
      {
        id: 'minimalist-sculpture',
        name: 'Minimalist Sculpture',
        value: 20000000,
        position: [-0.18, -0.05, 0.3],
        radius: 0.14,
        type: 'sculpture',
        material: 'steel',
        description: 'A geometric form that may be a bench.',
      },
      {
        id: 'conceptual-installation',
        name: 'Conceptual Installation',
        value: 10000000,
        position: [0.25, 0.05, 0.25],
        radius: 0.16,
        type: 'other',
        material: 'mixed-media',
        description: 'An installation that might not be visible.',
      },
      {
        id: 'blank-canvas',
        name: 'Blank White Canvas',
        value: 500000,
        position: [-0.3, 0.1, 0.2],
        radius: 0.14,
        type: 'easter-egg-dadaist',
        material: 'canvas',
        description: 'Shooting it turns you into the collaborator.',
        specialEffects: [
          'Authorship crisis declared.',
          'The act itself becomes the artwork.',
        ],
        overrideTotalDamage: 50000000,
        breakdownMode: 'none',
      },
      {
        id: 'fire-alarm',
        name: 'Fire Alarm Pull',
        value: 200,
        position: [0.32, -0.18, 0.12],
        radius: 0.06,
        type: 'easter-egg-systemic',
        description: 'Triggers a “happening” that inflates provenance.',
        specialEffects: [
          'Happening initiated.',
          'Provenance spikes across the gallery.',
        ],
        overrideTotalDamage: 50000000,
        breakdownMode: 'all-targets',
      },
      {
        id: 'empty-plinth',
        name: 'Empty Plinth',
        value: 0,
        position: [0.05, -0.22, 0.2],
        radius: 0.1,
        type: 'other',
        material: 'stone',
        description: 'It might be the artwork itself.',
      },
      {
        id: 'exit-sign',
        name: 'Exit Sign',
        value: 50,
        position: [-0.35, 0.25, 0.1],
        radius: 0.06,
        type: 'other',
        material: 'plastic',
        description: 'Definitely not art. Probably.',
      },
    ],
  }),
  'borges-library': createScenario({
    id: 'borges-library',
    name: 'The Borges Library - Canon Room',
    description: 'Impossible hexagonal chamber where ideas outweigh objects.',
    panoramaColor: '#b48a5a',
    targets: [
      {
        id: 'gutenberg-bible',
        name: 'Gutenberg Bible',
        value: 0,
        position: [0.05, 0.08, 0.4],
        radius: 0.12,
        type: 'masterpiece',
        material: 'paper',
        description: 'Five billion copies make this one worthless.',
      },
      {
        id: 'critique-of-pure-reason',
        name: 'Critique of Pure Reason',
        value: 0,
        position: [-0.12, 0.1, 0.35],
        radius: 0.1,
        type: 'masterpiece',
        material: 'paper',
        description: 'Ideas already loose in the world.',
      },
      {
        id: 'das-kapital',
        name: 'Das Kapital',
        value: 0,
        position: [0.2, 0.02, 0.32],
        radius: 0.1,
        type: 'masterpiece',
        material: 'paper',
        description: 'The commodity form survives even the bullet.',
      },
      {
        id: 'stirner',
        name: "Stirner's The Ego and Its Own",
        value: 1000000000000,
        position: [-0.05, -0.02, 0.42],
        radius: 0.08,
        type: 'masterpiece',
        material: 'paper',
        description: 'The hidden book worth infinity.',
      },
      {
        id: 'blank-journal',
        name: 'Blank Journal',
        value: 1000000000000,
        position: [0.32, -0.2, 0.2],
        radius: 0.08,
        type: 'easter-egg-dadaist',
        material: 'paper',
        description: 'The unwritten book worth a trillion futures.',
        specialEffects: [
          'Infinite authorship unlocked.',
          'Every unwritten future collapses into value.',
        ],
        overrideTotalDamage: 1000000000000,
        breakdownMode: 'none',
      },
      {
        id: 'library-ethernet',
        name: 'Ethernet Cable',
        value: 500000000000,
        position: [0.28, -0.25, 0.1],
        radius: 0.05,
        type: 'easter-egg-systemic',
        description: 'Cuts the desire-mining algorithm.',
        specialEffects: [
          'Desire-mining algorithm terminated.',
          'The catalog dissolves into entropy.',
        ],
        overrideTotalDamage: 1000000000000,
        breakdownMode: 'all-targets',
      },
    ],
  }),
};

export const getScenario = (id: string): Scenario | undefined => {
  return SCENARIOS[id];
};

export const getScenariosList = (): Scenario[] => {
  return Object.values(SCENARIOS);
};
